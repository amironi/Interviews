Opened log file 'C:\temp\cppdebug\3_Crash_BeforeAppVerifier.log'
0:000> g
ModLoad: 76220000 76280000   C:\Windows\SysWOW64\IMM32.DLL
ModLoad: 76c50000 76d1c000   C:\Windows\syswow64\MSCTF.dll
ModLoad: 71de0000 71e60000   C:\Windows\SysWOW64\UxTheme.dll
ModLoad: 71dc0000 71dd3000   C:\Windows\SysWOW64\dwmapi.dll
ModLoad: 53430000 5343d000   C:\Windows\SysWOW64\MFC100ENU.DLL
ModLoad: 74f80000 75bc9000   C:\Windows\syswow64\SHELL32.dll
ModLoad: 76800000 7695c000   C:\Windows\syswow64\ole32.dll
ModLoad: 03610000 0376c000   C:\Windows\SysWOW64\ole32.dll
ModLoad: 02310000 0246c000   C:\Windows\SysWOW64\ole32.dll
ModLoad: 76420000 764a3000   C:\Windows\syswow64\CLBCatQ.DLL
ModLoad: 75f30000 75fbf000   C:\Windows\syswow64\OLEAUT32.dll
Critical error detected c0000374
(1c7c.88): Break instruction exception - code 80000003 (first chance)
eax=00000000 ebx=00000000 ecx=772a94a8 edx=02cdf971 esi=00620000 edi=0098cd80
eip=772fdc6d esp=02cdfbc4 ebp=02cdfc3c iopl=0         nv up ei pl nz na po nc
cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00000202
ntdll!RtlReportCriticalFailure+0x29:
772fdc6d cc              int     3
0:001> kb
ChildEBP RetAddr  Args to Child              
02cdfc3c 772feba1 c0000374 77334268 02cdfc80 ntdll!RtlReportCriticalFailure+0x29
02cdfc4c 772fec81 00000002 5c98dc01 00620000 ntdll!RtlpReportHeapFailure+0x21
02cdfc80 772ba330 00000003 00620000 0098cd80 ntdll!RtlpLogHeapFailure+0xa1
02cdfcc8 77262b47 00620000 0098cd80 02cdfd90 ntdll!RtlpCoalesceFreeBlocks+0x84c
02cdfdc0 77262a32 0098bba8 0098bbb0 002cf868 ntdll!RtlpFreeHeap+0x1f4
02cdfde0 765114d1 00620000 00000000 0098bbb0 ntdll!RtlFreeHeap+0x142
02cdfdf4 744f016a 00620000 00000000 0098bbb0 kernel32!HeapFree+0x14
02cdfe08 00ef1784 0098bbb0 8dda3ec0 00000000 MSVCR100!free+0x1c [f:\dd\vctools\crt_bld\self_x86\crt\src\free.c @ 51]
02cdfe38 76513677 0098bbb0 02cdfe84 77269d42 BatteryMeter!TemperatureAndBatteryUpdaterThread+0xe4 [d:\livemesh\sharingbin\cppdebug\exercises\3_crash\sources\batterymeter\batterymeterdlg.cpp @ 57]
02cdfe44 77269d42 002cf868 5c98de05 00000000 kernel32!BaseThreadInitThunk+0xe
02cdfe84 77269d15 00ef16a0 002cf868 00000000 ntdll!__RtlUserThreadStart+0x70
02cdfe9c 00000000 00ef16a0 002cf868 00000000 ntdll!_RtlUserThreadStart+0x1b
0:001> !heap 0
Index   Address  Name      Debugging options enabled
  1:   00300000 
    Segment at 00300000 to 00400000 (00069000 bytes committed)
  2:   00620000 
    Segment at 00620000 to 00630000 (00010000 bytes committed)
    Segment at 00950000 to 00a50000 (0003e000 bytes committed)
  3:   00530000 
    Segment at 00530000 to 00540000 (00003000 bytes committed)
  4:   00a60000 
    Segment at 00a60000 to 00aa0000 (00040000 bytes committed)
  5:   005e0000 
    Segment at 005e0000 to 00620000 (00019000 bytes committed)
0:001> !heap -v
Index   Address  Name      Debugging options enabled
  1:   00300000 
    Segment at 00300000 to 00400000 (00069000 bytes committed)
  2:   00620000 
    Segment at 00620000 to 00630000 (00010000 bytes committed)
    Segment at 00950000 to 00a50000 (0003e000 bytes committed)
  3:   00530000 
    Segment at 00530000 to 00540000 (00003000 bytes committed)
  4:   00a60000 
    Segment at 00a60000 to 00aa0000 (00040000 bytes committed)
  5:   005e0000 
    Segment at 005e0000 to 00620000 (00019000 bytes committed)
0:001> !heap 1 -v
Index   Address  Name      Debugging options enabled
  1:   00300000 
    Segment at 00300000 to 00400000 (00069000 bytes committed)
    Flags:                00000002
    ForceFlags:           00000000
    Granularity:          8 bytes
    Segment Reserve:      00100000
    Segment Commit:       00002000
    DeCommit Block Thres: 00000800
    DeCommit Total Thres: 00002000
    Total Free Size:      00002305
    Max. Allocation Size: 7ffdefff
    Lock Variable at:     00300138
    Next TagIndex:        0000
    Maximum TagIndex:     0000
    Tag Entries:          00000000
    PsuedoTag Entries:    00000000
    Virtual Alloc List:   003000a0
    Uncommitted ranges:   00300090
    FreeList[ 00 ] at 003000c4: 003586d8 . 003556c8   (5 blocks)

0:001> !heap 0 -v
Index   Address  Name      Debugging options enabled
  1:   00300000 
    Segment at 00300000 to 00400000 (00069000 bytes committed)
    Flags:                00000002
    ForceFlags:           00000000
    Granularity:          8 bytes
    Segment Reserve:      00100000
    Segment Commit:       00002000
    DeCommit Block Thres: 00000800
    DeCommit Total Thres: 00002000
    Total Free Size:      00002305
    Max. Allocation Size: 7ffdefff
    Lock Variable at:     00300138
    Next TagIndex:        0000
    Maximum TagIndex:     0000
    Tag Entries:          00000000
    PsuedoTag Entries:    00000000
    Virtual Alloc List:   003000a0
    Uncommitted ranges:   00300090
    FreeList[ 00 ] at 003000c4: 003586d8 . 003556c8   (5 blocks)

  2:   00620000 
    Segment at 00620000 to 00630000 (00010000 bytes committed)
    Segment at 00950000 to 00a50000 (0003e000 bytes committed)
    Flags:                00001002
    ForceFlags:           00000000
    Granularity:          8 bytes
    Segment Reserve:      00200000
    Segment Commit:       00002000
    DeCommit Block Thres: 00000800
    DeCommit Total Thres: 00002000
    Total Free Size:      000002fa
    Max. Allocation Size: 7ffdefff
    Lock Variable at:     00620138
    Next TagIndex:        0000
    Maximum TagIndex:     0000
    Tag Entries:          00000000
    PsuedoTag Entries:    00000000
    Virtual Alloc List:   006200a0
    Uncommitted ranges:   00620090
    FreeList[ 00 ] at 006200c4: 0098cd88 . 00622980      Unable to read nt!_HEAP_FREE_ENTRY structure at 006e0041
 (5 blocks)

    
##CORRUPTION FOUND at 0x0098CD80
    PreviousSize field does not match Size field in previous entry 
    Entry->PreviousSize == 0xadc3
    PreviousEntry->Size == 0x181
            unable to read heap entry at 009e3b98
##The above errors were found in segment at 0x00950000
  3:   00530000 
    Segment at 00530000 to 00540000 (00003000 bytes committed)
    Flags:                00001002
    ForceFlags:           00000000
    Granularity:          8 bytes
    Segment Reserve:      00100000
    Segment Commit:       00002000
    DeCommit Block Thres: 00000200
    DeCommit Total Thres: 00002000
    Total Free Size:      00000090
    Max. Allocation Size: 7ffdefff
    Lock Variable at:     00530138
    Next TagIndex:        0000
    Maximum TagIndex:     0000
    Tag Entries:          00000000
    PsuedoTag Entries:    00000000
    Virtual Alloc List:   005300a0
    Uncommitted ranges:   00530090
    FreeList[ 00 ] at 005300c4: 00532be8 . 00531708   (2 blocks)

  4:   00a60000 
    Segment at 00a60000 to 00aa0000 (00040000 bytes committed)
    Flags:                00001002
    ForceFlags:           00000000
    Granularity:          8 bytes
    Segment Reserve:      00100000
    Segment Commit:       00002000
    DeCommit Block Thres: 00000800
    DeCommit Total Thres: 00002000
    Total Free Size:      00000240
    Max. Allocation Size: 7ffdefff
    Lock Variable at:     00a60138
    Next TagIndex:        0000
    Maximum TagIndex:     0000
    Tag Entries:          00000000
    PsuedoTag Entries:    00000000
    Virtual Alloc List:   00a600a0
    Uncommitted ranges:   00a60090
    FreeList[ 00 ] at 00a600c4: 00a9f048 . 00a9d4a0   (2 blocks)

  5:   005e0000 
    Segment at 005e0000 to 00620000 (00019000 bytes committed)
    Flags:                00001002
    ForceFlags:           00000000
    Granularity:          8 bytes
    Segment Reserve:      00100000
    Segment Commit:       00002000
    DeCommit Block Thres: 00000200
    DeCommit Total Thres: 00002000
    Total Free Size:      00001812
    Max. Allocation Size: 7ffdefff
    Lock Variable at:     005e0138
    Next TagIndex:        0000
    Maximum TagIndex:     0000
    Tag Entries:          00000000
    PsuedoTag Entries:    00000000
    Virtual Alloc List:   005e00a0
    Uncommitted ranges:   005e0090
    FreeList[ 00 ] at 005e00c4: 005efc78 . 005ef770   (4 blocks)

0:001> db 0x0098CD80
0098cd80  43 00 50 00 55 00 20 00-49 00 6e 00 74 00 65 00  C.P.U. .I.n.t.e.
0098cd90  72 00 6e 00 61 00 6c 00-20 00 49 00 6e 00 66 00  r.n.a.l. .I.n.f.
0098cda0  6f 00 20 00 53 00 74 00-72 00 75 00 63 00 74 00  o. .S.t.r.u.c.t.
0098cdb0  75 00 72 00 65 00 00 00-00 00 00 00 00 00 00 00  u.r.e...........
0098cdc0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
0098cdd0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
0098cde0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
0098cdf0  00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00  ................
0:001> q
quit:
